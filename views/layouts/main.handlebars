<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="/css/tailwind.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Bungee+Outline&family=Nerko+One&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sniglet:wght@400;800&display=swap"
    rel="stylesheet">
  <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/7652f157a9.js" crossorigin="anonymous"></script>
  <title>BABELbox</title>
  {{{_sections.styles}}}
</head>

{{!-- barba main wrapper --}}
<body data-barba="wrapper" class="bg-blue-200">
  <div id="loader" class="fixed flex items-center justify-center h-full w-full bg-blue-200 z-50">
    <div class="loader1">
      <span class="h-10 w-10"></span>
      <span class="h-10 w-10"></span>
      <span class="h-10 w-10"></span>
      <span class="h-10 w-10"></span>
      <span class="h-10 w-10"></span>
    </div>
  </div>
  {{{body}}}
  {{> footer}}
  <script src="https://cdn.jsdelivr.net/npm/socket.io-client@3.0.1/dist/socket.io.min.js"></script>
  <script src="/js/index.js"></script>
  <script>
    window.onload = (event) => {
      document.querySelector('#loader').remove()
      {{#if currentUser}}
        localStorage.setItem('currentUser', '{{{ stringify currentUser }}}');
      {{/if}}
      {{#if portal}}
        localStorage.setItem('portal', '{{{ stringify portal }}}');
      {{/if}}
    };
    console.log(localStorage.getItem('currentUser'))
    const socket = io();
    socket.io.connect('http://localhost:3001')
    socket.on('new user', pushNewUser)
    socket.on('updated user', pushUpdatedUser)
    socket.on('deleted user', pushDeletedUser)
    socket.on('phase changed', changePortalPhase)
  </script>
  {{{_sections.script}}}
</body>

</html>
